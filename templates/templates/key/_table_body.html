<tbody id="key-table-body">

  {% if error_message %}
  <tr>
    <td colspan="8">
      <div class="alert alert-danger mb-2">
        {{ error_message }}
      </div>
    </td>
  </tr>
  {% endif %}
  
  {% for log in logs %}
  <tr class="border-b last:border-0">
    <td class="py-2 px-3">{{ log.ticket_mbs }}</td>
    <td class="px-3">{{ log.visitor_name }}</td>
    <td class="px-3">{{ log.visitor_company or "-" }}</td>
    <td class="px-3">{{ log.rack_location }}</td>
    <td class="px-3">{{ log.status }}</td>
    <td class="px-3">
      {{ log.time_in.strftime('%Y-%m-%d %H:%M') if log.time_in else '-' }}
    </td>
    <td class="px-3">
      {{ log.time_out.strftime('%Y-%m-%d %H:%M') if log.time_out else '-' }}
    </td>
<td class="px-3">
  <div class="flex items-center gap-1">
    <button
      class="px-2 py-1 text-[11px] bg-slate-700 text-white rounded hover:bg-slate-800"
      hx-get="{{ url_for('key.detail', log_id=log.id) }}"
      hx-target="#modal-container"
      hx-trigger="click"
    >
      Detail
    </button>

    {% if log.status == 'borrowed' %}
      <button
        class="px-2 py-1 text-[11px] bg-emerald-600 text-white rounded hover:bg-emerald-700"
        hx-get="{{ url_for('key.return_form', log_id=log.id) }}"
        hx-target="#modal-container"
        hx-trigger="click"
      >
        Kembalikan
      </button>
    {% else %}
      <span class="text-[11px] text-slate-400">Selesai</span>
    {% endif %}
  </div>
</td>

  </tr>
  {% else %}
  <tr>
    <td colspan="8" class="py-3 text-center text-slate-400 italic">
      Belum ada transaksi peminjaman kunci.
    </td>
  </tr>
  {% endfor %}
</tbody>
